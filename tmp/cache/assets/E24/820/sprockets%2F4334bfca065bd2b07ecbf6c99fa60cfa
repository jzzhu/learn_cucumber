o: ActiveSupport::Cache::Entry	:@compressedF:@expires_in0:@created_atf1413947783.137054:@value{I"
class:EFI"BundledAsset;
FI"id;
F"%10e4b8f16186f4c1d8c5ef84b3c7d41bI"logical_path;
F"search.jsI"pathname;
FI"+$root/app/assets/javascripts/search.js;
FI"content_type;
FI"application/javascript;
FI"
mtime;
FI"2014-10-21T15:03:32+08:00;
FI"	body;
FI"ufunction Search(form){
  this.form = form
}

Search.prototype.queue = function (query){
  if (this.timer) {
  clearTimeout(this.timer);
  }
  var self = this;
  this.timer = setTimeout(function() {
    self.search(query);
  }, 150);
};

Search.prototype.search = function (query) {
  var self = this;
  jQuery.ajax({
    url: this.form.action,
    type: this.form.method,
    data: {'query': query},
    success: function(results) {self.render(results)},
    contentType: 'application/json',
    dataType: 'json'
  });
}

Search.prototype.render = function (results) {
  var html = "";
  for (var i = 0, l = results.length; i < l; ++i) {
    var url = '/users/' + results[i].user_id + '/messages/' + results[i].id;
    html += '<li><a href="' + url + '">' + results[i].content + '</a></li>';
  }
  jQuery(this.form).find('ol.results').html(html);
}

jQuery.fn.search = function () {
  this.each(function () {
    var search = new Search(this);
    var input = jQuery(this).find("input[type=text]");
    input.bind('keyup', function () {
      search.queue(this.value);
    });
  });
};

jQuery(function() {
  jQuery('#search').search();
});
;
FI"asset_paths;
F[I"+$root/app/assets/javascripts/search.js;
FI"dependency_paths;
F[{I"	path;
FI"+$root/app/assets/javascripts/search.js;
FI"
mtime;
FIu:	Time§¦€F

:@_zoneI"CST;
T:nano_numi„:nano_deni:submicro"d@:offseti€pI"hexdigest;
F"%7cebe61919f075aa110a4b70adfc080bI"_version;
F"%5397ace057ac8dcf6c38e89335593daf